"use strict";(()=>{var ue=Object.defineProperty;var a=(x,C)=>ue(x,"name",{value:C,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7807],{79535:(x,C,h)=>{var g=h(64463),m=h(59753),p=h(65935),d=h(82036);(0,m.on)("click",".js-codespaces-update-skus-url",e=>{const t=e.currentTarget;if(!t)return;const n=t.getAttribute("data-refname");if(document.querySelector("form.js-prefetch-codespace-location")&&n){const r=document.querySelector("[data-codespace-skus-url]"),b=r?r.getAttribute("data-codespace-skus-url"):"";if(b){const A=new URL(b,window.location.origin);A.searchParams.set("ref_name",n),r&&r.setAttribute("data-codespace-skus-url",A.toString()),r&&r.setAttribute("data-branch-has-changed","true")}}}),(0,m.on)("remote-input-error","#js-codespaces-repository-select",()=>{const e=document.querySelector("#js-codespaces-unable-load-repositories-warning");e.hidden=!1});function l(e){const t=new URL(document.location.href,window.location.origin),n=new URLSearchParams(t.search),i=["vscs_target"];for(const[r,b]of e.entries()){if(i.includes(r)||!b){n.delete(r);continue}n.set(r,b)}window.history.replaceState({},"",`?${n.toString()}`)}a(l,"updateNewCodespaceUrl"),(0,p.AC)(".js-new-codespace-form",async function(e,t){const n=e.closest("[data-replace-remote-form-target]"),i=n.querySelector(".js-new-codespace-submit-button");i instanceof HTMLInputElement&&(i.disabled=!0),e.classList.remove("is-error"),e.classList.add("is-loading");try{const r=await t.html();if(n.replaceWith(r.html),n.getAttribute("data-allow-update-url")==="true"){const b=new FormData(document.querySelector("form.js-new-codespace-form"));l(b)}}catch{e.classList.remove("is-loading"),e.classList.add("is-error")}});let o=null;function u(e){o=e,e!==null&&document.querySelector(".js-codespace-loading-steps").setAttribute("data-current-state",o)}a(u,"advanceLoadingState"),(0,g.N7)(".js-codespace-loading-steps",{constructor:HTMLElement,add:e=>{const t=e.getAttribute("data-current-state");t&&u(t)}}),(0,g.N7)(".js-codespace-advance-state",{constructor:HTMLElement,add:e=>{const t=e.getAttribute("data-state");t&&u(t)}});let _=null;function w(e){(0,p.AC)(".js-fetch-cascade-token",async function(t,n){try{_=(await n.json()).json.token}catch{}}),(0,d.Bt)(e)}a(w,"fetchCascadeToken");function y(e,t,n){if(document.querySelector(e)){const r=Date.now(),A=setInterval(a(()=>{const J=Date.now()-r;if(_||J>=n){clearInterval(A),t(_||void 0);return}},"checkToken"),50)}}a(y,"waitForCascadeTokenWithTimeout"),(0,g.N7)(".js-auto-submit-form",{constructor:HTMLFormElement,initialize:d.Bt}),(0,g.N7)(".js-workbench-form-container",{constructor:HTMLElement,add:e=>{const t=e.querySelector(".js-cascade-token");T(e,t)}});function T(e,t){if(t.value!==""){const n=e.querySelector("form");(0,d.Bt)(n)}else{const n=document.querySelector(".js-fetch-cascade-token");w(n),y(".js-workbench-form-container",I,1e4)}}a(T,"resolveCascadeToken");function I(e){const t=document.querySelector(".js-workbench-form-container form");t&&e?(v(t,e),E(t,e),(0,d.Bt)(t)):u("failed")}a(I,"insertCodespaceTokenIntoShowAuthForm");function v(e,t){const n=e.querySelector(".js-cascade-token");n&&n.setAttribute("value",t)}a(v,"insertCodespaceTokenIntoCascadeField");function E(e,t){const n=e.querySelector(".js-partner-info");if(n){let i=n.getAttribute("value");i&&(i=i.replace("%CASCADE_TOKEN_PLACEHOLDER%",t),n.setAttribute("value",i))}}a(E,"insertCodespaceTokenIntoPartnerInfo");var c=h(90420),s=h(69567),f=h(51374),S=h(10900),k=h(83956);(0,m.on)("submit",".js-toggle-hidden-codespace-form",function(e){const t=e.currentTarget;L(t)}),(0,m.on)("click",".js-create-codespace-with-sku-button",async function(e){const t=e.currentTarget,n=t.closest("[data-target*='new-codespace.createCodespaceForm']")||t.closest("[data-target*='new-codespace.createCodespaceWithSkuSelectForm']");await(0,k.M)(n),n.classList.contains("js-open-in-vscode-form")?(L(n),V(n)):(n.submit(),O())});function L(e){const t=e.querySelectorAll(".js-toggle-hidden");for(const i of t)i.hidden=!i.hidden;const n=e.querySelectorAll(".js-toggle-disabled");for(const i of n)i.getAttribute("aria-disabled")?i.removeAttribute("aria-disabled"):i.setAttribute("aria-disabled","true")}a(L,"toggleFormSubmissionInFlight");function F(e){return e.closest("[data-replace-remote-form-target]")}a(F,"getFormTarget");async function O(){const e=document.querySelector(".js-codespaces-details-container");e&&(e.open=!1);const t=document.querySelector("new-codespace");if(t&&!t.getAttribute("data-no-submit-on-create"))try{const n=await fetch("/codespaces/new");if(n&&n.ok){const i=(0,S.r)(document,await n.text());t.replaceWith(i)}}catch{}}a(O,"createFormSubmitted"),(0,m.on)("submit",".js-create-codespaces-form-command",function(e){const t=e.currentTarget;t.classList.contains("js-open-in-vscode-form")||(O(),L(t))}),(0,m.on)("submit","form.js-codespaces-delete-form",async function(e){e.preventDefault();const t=e.currentTarget;try{const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}});if(n.ok){const i=(0,S.r)(document,await n.text());F(t).replaceWith(i)}else if(n.status===401)t.submit();else throw new Error(`Unexpected response: ${n.statusText}`)}finally{L(t)}}),(0,m.on)("submit","form.js-open-in-vscode-form",async function(e){e.preventDefault();const t=e.currentTarget;await V(t)});async function H(e,t){const n=document.querySelector(`#${e}`),i=await(0,f.W)({content:n.content.cloneNode(!0),dialogClass:"project-dialog"});return t&&t.setAttribute("aria-expanded","true"),i.addEventListener("dialog:remove",function(){t&&L(t)},{once:!0}),i}a(H,"openDialog");async function V(e){const t=await fetch(e.action,{method:e.method,body:new FormData(e),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(t.ok){const n=await t.json();n.codespace_url?(window.location.href=n.codespace_url,L(e),O(),q()):(e.closest("get-repo")||e.closest("new-codespace")?(e.setAttribute("data-src",n.loading_url),e.dispatchEvent(new CustomEvent("pollvscode"))):(e.closest("prefetch-pane")||e.closest("create-button"))&&(e.setAttribute("data-src",n.loading_url),e.dispatchEvent(new CustomEvent("prpollvscode"))),L(e))}else if(t.status===422){const n=await t.json();if(n.error_type==="concurrency_limit_error")await H("concurrency-error",e);else{const i=document.querySelector("template.js-flash-template"),r=n.error;i.after(new s.R(i,{className:"flash-error",message:r})),L(e)}}}a(V,"createCodespaceIntoVscode");async function q(){const e=document.querySelector(".js-codespaces-completable"),t=e&&e.getAttribute("data-src");if(!t)return;const n=await fetch(t,{method:"GET",headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}});if(n.ok){const i=(0,S.r)(document,await n.text());e.replaceWith(i)}else throw new Error(`Unexpected response: ${n.statusText}`)}a(q,"renderAllDone");var z=Object.defineProperty,U=Object.getOwnPropertyDescriptor,Y=a((e,t,n,i)=>{for(var r=i>1?void 0:i?U(t,n):t,b=e.length-1,A;b>=0;b--)(A=e[b])&&(r=(i?A(t,n,r):A(r))||r);return i&&r&&z(t,n,r),r},"__decorateClass");let Z=a(class extends HTMLElement{async connectedCallback(){H("concurrency-error")}},"ConcurrencyLimitElement");Z=Y([c.Ih],Z);var ee=Object.defineProperty,te=Object.getOwnPropertyDescriptor,D=a((e,t,n,i)=>{for(var r=i>1?void 0:i?te(t,n):t,b=e.length-1,A;b>=0;b--)(A=e[b])&&(r=(i?A(t,n,r):A(r))||r);return i&&r&&ee(t,n,r),r},"new_codespace_element_decorateClass");let P=a(class extends HTMLElement{constructor(){super(...arguments);this.noPrefetch=!1}async connectedCallback(){if(!this.noPrefetch){const e=this.formForLocations();if(e){const t=await(0,k.M)(e,!this.vscsLocationList);this.updatePickableLocations(t)}}}formForLocations(){return this.advancedOptionsForm||this.createCodespaceForm}toggleLoadingVscode(){const e=this.loadingVscode.hidden,t=this.children;for(let n=0;n<t.length;n++)t[n].hidden=e;this.loadingVscode.hidden=!e}machineTypeSelected(e){const n=e.currentTarget.getAttribute("data-sku-name");this.skuNameInput&&n&&(this.skuNameInput.value=n),this.advancedOptionsForm&&this.advancedOptionsForm.requestSubmit()}pollForVscode(e){this.toggleLoadingVscode();const t=e.currentTarget.getAttribute("data-src");t&&this.vscodePoller.setAttribute("src",t)}async updatePickableLocations(e){const t=this.formForLocations();if(!e&&t){const r=t.getAttribute("data-codespace-locations-url");if(!r)return;e=await(0,k.W)(r)}const n=e.current,i=e.available;this.hideUnavailableLocations(i),this.preventSubmissionOfUnavailableLocation(i,n)}hideUnavailableLocations(e){if(!!this.vscsLocationList)if(this.advancedOptionsForm){const t=this.vscsLocationList.querySelectorAll(".select-menu-item");for(const n of t){const i=n.querySelector("input");if(i&&e.includes(i.getAttribute("data-location"))){n.removeAttribute("hidden");continue}i&&(i.removeAttribute("checked"),i.setAttribute("aria-checked","false")),n.setAttribute("hidden","hidden")}}else{const t=this.vscsLocationList.querySelectorAll(".SelectMenu-item");for(const n of t)e.includes(n.getAttribute("data-location"))?n.removeAttribute("hidden"):n.setAttribute("hidden","hidden")}}preventSubmissionOfUnavailableLocation(e,t){if(this.createCodespaceForm){const n=this.createCodespaceForm.querySelector('[name="codespace[location]"]');n&&!e.includes(n.value)&&(n.value=t)}if(this.advancedOptionsForm){const n=this.advancedOptionsForm.querySelector('[name="location"]');n&&!e.includes(n.value)&&(n.value=t),!this.advancedOptionsForm.querySelector('[name="location"]:checked')&&(this.selectedLocation&&this.selectedLocation.setAttribute("hidden","hidden"),this.needsSelectedLocation&&this.needsSelectedLocation.removeAttribute("hidden"))}}vscsTargetUrlUpdated(e){const t=e.currentTarget;this.vscsTargetUrl.value=t.value}},"NewCodespaceElement");D([c.fA],P.prototype,"form",2),D([c.fA],P.prototype,"createCodespaceForm",2),D([c.fA],P.prototype,"createCodespaceWithSkuSelectForm",2),D([c.fA],P.prototype,"vscsTargetUrl",2),D([c.fA],P.prototype,"vscsLocationList",2),D([c.fA],P.prototype,"loadingVscode",2),D([c.fA],P.prototype,"vscodePoller",2),D([c.fA],P.prototype,"advancedOptionsForm",2),D([c.fA],P.prototype,"locationResubmitParam",2),D([c.fA],P.prototype,"skuNameInput",2),D([c.fA],P.prototype,"selectedLocation",2),D([c.fA],P.prototype,"needsSelectedLocation",2),D([c.Lj],P.prototype,"noPrefetch",2),P=D([c.Ih],P);var ne=Object.defineProperty,se=Object.getOwnPropertyDescriptor,K=a((e,t,n,i)=>{for(var r=i>1?void 0:i?se(t,n):t,b=e.length-1,A;b>=0;b--)(A=e[b])&&(r=(i?A(t,n,r):A(r))||r);return i&&r&&ne(t,n,r),r},"export_branch_element_decorateClass");let W=a(class extends HTMLElement{constructor(){super(...arguments);this.abortPoll=null}connectedCallback(){this.abortPoll=new AbortController,this.loadingIndicator.hidden||this.startPoll()}disconnectedCallback(){var e;(e=this.abortPoll)==null||e.abort()}async exportBranch(e){e.preventDefault(),this.form.hidden=!0,this.loadingIndicator.hidden=!1,(await fetch(this.form.action,{method:this.form.method,body:new FormData(this.form),headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}})).ok?this.startPoll():(this.form.hidden=!1,this.loadingIndicator.hidden=!0)}async startPoll(){const e=this.getAttribute("data-exported-codespace-url")||"",t=await this.poll(e);if(t)if(t.ok)this.loadingIndicator.hidden=!0,this.viewBranchLink.hidden=!1;else{const n=this.getAttribute("data-export-error-redirect-url")||"";window.location.href=n}}async poll(e,t=1e3){var n,i;if((n=this.abortPoll)==null?void 0:n.signal.aborted)return;const r=await fetch(e,{signal:(i=this.abortPoll)==null?void 0:i.signal});return r.status===202?(await new Promise(b=>setTimeout(b,t)),this.poll(e,t*1.5)):r}},"ExportBranchElement");K([c.fA],W.prototype,"form",2),K([c.fA],W.prototype,"loadingIndicator",2),K([c.fA],W.prototype,"viewBranchLink",2),W=K([c.Ih],W);var oe=h(52660),ie=Object.defineProperty,re=Object.getOwnPropertyDescriptor,B=a((e,t,n,i)=>{for(var r=i>1?void 0:i?re(t,n):t,b=e.length-1,A;b>=0;b--)(A=e[b])&&(r=(i?A(t,n,r):A(r))||r);return i&&r&&ie(t,n,r),r},"options_popover_element_decorateClass");let j=a(class extends HTMLElement{reset(e){for(e.preventDefault(),this.dropdownDetails.hidden=!1,this.modalDetails.hidden=!0,this.exportDetails.hidden=!0,this.skuForm.hidden=!1;this.resultMessage.firstChild;)this.resultMessage.removeChild(this.resultMessage.firstChild);this.resultMessage.hidden=!0,this.errorMessage.hidden=!0}showSettingsModal(){this.dropdownDetails.hidden=!0,this.modalDetails.open=!0,this.modalDetails.hidden=!1}showExportModal(){this.dropdownDetails.hidden=!0,this.exportDetails.open=!0,this.exportDetails.hidden=!1,this.insertBranchExportComponent()}async insertBranchExportComponent(){const e=this.querySelector("[data-branch-export-url]");if(!e)return;const t=e.getAttribute("data-branch-export-url");if(!t)return;const n=await(0,oe.a)(document,t);!n||(e.innerHTML="",e.appendChild(n))}},"OptionsPopoverElement");B([c.fA],j.prototype,"dropdownDetails",2),B([c.fA],j.prototype,"modalDetails",2),B([c.fA],j.prototype,"settingsModal",2),B([c.fA],j.prototype,"skuForm",2),B([c.fA],j.prototype,"resultMessage",2),B([c.fA],j.prototype,"errorMessage",2),B([c.fA],j.prototype,"exportDetails",2),j=B([c.Ih],j);var ae=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,M=a((e,t,n,i)=>{for(var r=i>1?void 0:i?ce(t,n):t,b=e.length-1,A;b>=0;b--)(A=e[b])&&(r=(i?A(t,n,r):A(r))||r);return i&&r&&ae(t,n,r),r},"prefetch_pane_element_decorateClass");let R=a(class extends HTMLElement{constructor(){super(...arguments);this.prefetching=!1,this.remainingRetries=3}async connectedCallback(){this.openSkuButton&&this.skipSkuButton?(await this.prefetchLocationAndSkus(),this.hideSpinner(),this.hidden=!1):this.showOpenSkuButton()}async prefetchLocationAndSkus(){const e=this.getAttribute("data-branch-has-changed")==="true";if(this.prefetching&&!e)return;const t=document.querySelector("form.js-prefetch-codespace-location")||document.querySelector("form.js-open-in-vscode-form");if(t){this.prefetching=!0;const n=await(0,k.M)(t);if(n&&(this.currentLocation=n.current),!this.skuSelect)return;const i=this.getAttribute("data-codespace-skus-url"),r=this.currentLocation||(t.querySelector('[name="codespace[location]"]')||{}).value;if(r&&i){const b=await fetch(`${i}&location=${r}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html_fragment"}});if(b.ok){this.setAttribute("data-branch-has-changed","false");const A=(0,S.r)(document,await b.text()),X=Array.from(A.querySelectorAll("input[name='codespace[sku_name]']")).filter(N=>!N.disabled),G=X.find(N=>N.checked);G&&this.defaultSkuPreview?(this.defaultSkuPreview.innerHTML=G.getAttribute("data-preview")||"",this.showSkipSkuButton()):X.length===1?(G||X[0].select(),this.showSkipSkuButton()):this.disableDropDownButton(),this.skuSelect.replaceWith(A),this.skuSelect.hidden=!1,this.skuError&&(this.skuError.hidden=!0)}else this.showOpenSkuButton(),this.remainingRetries-=1,this.remainingRetries>0&&(this.prefetching=!1),this.skuSelect.hidden=!0,this.skuError&&(this.skuError.hidden=!1)}}}showOpenSkuButton(){var e;this.shownButton===void 0&&this.openSkuButton&&(this.shownButton=this.openSkuButton,this.shownButton.hidden=!1,(e=this.skipSkuButton)==null||e.remove())}hideSpinner(){const e=document.querySelector("[data-target='codespacesCreateButtonSpinner']");e&&(e.hidden=!0)}disableDropDownButton(){this.dropdownButton&&(this.useAdvancedCreation(),this.dropdownButton.style.pointerEvents="none",this.dropdownButton.classList.add("color-fg-muted"))}showSkipSkuButton(){var e,t;if(this.shownButton===void 0&&this.skipSkuButton){this.shownButton=this.skipSkuButton,this.shownButton.hidden=!1;const n=(e=this.openSkuButton)==null?void 0:e.parentElement;n&&n instanceof HTMLDetailsElement&&(n.hidden=!0),(t=this.openSkuButton)==null||t.remove()}}toggleLoadingVscode(){if(this.loadingVscode){const e=this.loadingVscode.hidden,t=this.children;for(let n=0;n<t.length;n++)t[n].hidden=e;this.loadingVscode.hidden=!e}}pollForVscode(e){if(this.vscodePoller){this.toggleLoadingVscode();const t=e.currentTarget.getAttribute("data-src");t&&this.vscodePoller.setAttribute("src",t)}}useBasicCreation(){this.advancedOptionsLink&&(this.openSkuButton&&(this.openSkuButton.hidden=!1),this.skipSkuButton&&(this.skipSkuButton.hidden=!1),this.advancedOptionsLink&&(this.advancedOptionsLink.hidden=!0)),this.basicOptionsCheck&&this.basicOptionsCheck.classList.remove("v-hidden"),this.advancedOptionsCheck&&this.advancedOptionsCheck.classList.add("v-hidden"),this.selectionDetails.open=!1}useAdvancedCreation(){this.advancedOptionsLink&&(this.openSkuButton&&(this.openSkuButton.hidden=!0),this.skipSkuButton&&(this.skipSkuButton.hidden=!0),this.advancedOptionsLink.hidden=!1),this.basicOptionsCheck&&this.basicOptionsCheck.classList.add("v-hidden"),this.advancedOptionsCheck&&this.advancedOptionsCheck.classList.remove("v-hidden"),this.selectionDetails.open=!1}},"PrefetchPaneElement");M([c.fA],R.prototype,"skuSelect",2),M([c.fA],R.prototype,"skuError",2),M([c.fA],R.prototype,"selectionDetails",2),M([c.fA],R.prototype,"loadingVscode",2),M([c.fA],R.prototype,"vscodePoller",2),M([c.fA],R.prototype,"openSkuButton",2),M([c.fA],R.prototype,"skipSkuButton",2),M([c.fA],R.prototype,"defaultSkuPreview",2),M([c.fA],R.prototype,"dropdownButton",2),M([c.fA],R.prototype,"advancedOptionsLink",2),M([c.fA],R.prototype,"basicOptionsCheck",2),M([c.fA],R.prototype,"advancedOptionsCheck",2),R=M([c.Ih],R);var le=Object.defineProperty,de=Object.getOwnPropertyDescriptor,Q=a((e,t,n,i)=>{for(var r=i>1?void 0:i?de(t,n):t,b=e.length-1,A;b>=0;b--)(A=e[b])&&(r=(i?A(t,n,r):A(r))||r);return i&&r&&le(t,n,r),r},"vscode_forwarder_element_decorateClass");let $=a(class extends HTMLElement{async connectedCallback(){this.closeDetailsPopover();const e=this.getAttribute("data-codespace-url");e&&(window.location.href=e)}closeDetailsPopover(){const e=document.querySelector(".js-codespaces-details-container");e&&(e.open=!1)}},"VscodeForwarderElement");Q([c.fA],$.prototype,"vscodeLink",2),$=Q([c.Ih],$);var he=h(9115),fe=h(68906)},52134:(x,C,h)=>{h.d(C,{H:()=>p,v:()=>m});var g=h(59753);function m(){const d=document.getElementById("ajax-error-message");d&&(d.hidden=!1)}a(m,"showGlobalError");function p(){const d=document.getElementById("ajax-error-message");d&&(d.hidden=!0)}a(p,"hideGlobalError"),(0,g.on)("deprecatedAjaxError","[data-remote]",function(d){const l=d.detail,{error:o,text:u}=l;d.currentTarget===d.target&&(o==="abort"||o==="canceled"||(/<html/.test(u)?(m(),d.stopImmediatePropagation()):setTimeout(function(){d.defaultPrevented||m()},0)))}),(0,g.on)("deprecatedAjaxSend","[data-remote]",function(){p()}),(0,g.on)("click",".js-ajax-error-dismiss",function(){p()})},51374:(x,C,h)=>{h.d(C,{W:()=>m});var g=h(59753);async function m(p){const l=document.querySelector("#site-details-dialog").content.cloneNode(!0),o=l.querySelector("details"),u=o.querySelector("details-dialog"),_=o.querySelector(".js-details-dialog-spinner");p.detailsClass&&o.classList.add(...p.detailsClass.split(" ")),p.dialogClass&&u.classList.add(...p.dialogClass.split(" ")),p.label?u.setAttribute("aria-label",p.label):p.labelledBy&&u.setAttribute("aria-labelledby",p.labelledBy),document.body.append(l);const w=await p.content;return _.remove(),u.prepend(w),o.addEventListener("toggle",()=>{o.hasAttribute("open")||((0,g.f)(u,"dialog:remove"),o.remove())}),u}a(m,"dialog")},34782:(x,C,h)=>{h.d(C,{C:()=>m,x:()=>g});const g=function(){return document.readyState==="interactive"||document.readyState==="complete"?Promise.resolve():new Promise(p=>{document.addEventListener("DOMContentLoaded",()=>{p()})})}(),m=function(){return document.readyState==="complete"?Promise.resolve():new Promise(p=>{window.addEventListener("load",p)})}()},52660:(x,C,h)=>{h.d(C,{D:()=>d,a:()=>p});var g=h(2699),m=h(10900);async function p(l,o,u){const _=new Request(o,u);_.headers.append("X-Requested-With","XMLHttpRequest");const w=await self.fetch(_);if(w.status<200||w.status>=300)throw new Error(`HTTP ${w.status}${w.statusText||""}`);return(0,g.t)((0,g.P)(l),w),(0,m.r)(l,await w.text())}a(p,"fetchSafeDocumentFragment");function d(l,o,u=1e3){return a(async function _(w){const y=new Request(l,o);y.headers.append("X-Requested-With","XMLHttpRequest");const T=await self.fetch(y);if(T.status<200||T.status>=300)throw new Error(`HTTP ${T.status}${T.statusText||""}`);if(T.status===200)return T;if(T.status===202)return await new Promise(I=>setTimeout(I,w)),_(w*1.5);throw new Error(`Unexpected ${T.status} response status from poll endpoint`)},"poll")(u)}a(d,"fetchPoll")},82036:(x,C,h)=>{h.d(C,{Bt:()=>l,DN:()=>_,KL:()=>T,Se:()=>u,qC:()=>I,sw:()=>w});var g=h(59753),m=h(90137),p=h(52134);(0,g.on)("click",".js-remote-submit-button",async function(v){const c=v.currentTarget.form;v.preventDefault();let s;try{s=await fetch(c.action,{method:c.method,body:new FormData(c),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch{}s&&!s.ok&&(0,p.v)()});function d(v,E,c){return v.dispatchEvent(new CustomEvent(E,{bubbles:!0,cancelable:c}))}a(d,"fire");function l(v,E){E&&(o(v,E),(0,m.j)(E)),d(v,"submit",!0)&&v.submit()}a(l,"requestSubmit");function o(v,E){if(!(v instanceof HTMLFormElement))throw new TypeError("The specified element is not of type HTMLFormElement.");if(!(E instanceof HTMLElement))throw new TypeError("The specified element is not of type HTMLElement.");if(E.type!=="submit")throw new TypeError("The specified element is not a submit button.");if(!v||v!==E.form)throw new Error("The specified element is not owned by the form element.")}a(o,"checkButtonValidity");function u(v,E){if(typeof E=="boolean")if(v instanceof HTMLInputElement)v.checked=E;else throw new TypeError("only checkboxes can be set to boolean value");else{if(v.type==="checkbox")throw new TypeError("checkbox can't be set to string value");v.value=E}d(v,"change",!1)}a(u,"changeValue");function _(v,E){for(const c in E){const s=E[c],f=v.elements.namedItem(c);(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement)&&(f.value=s)}}a(_,"fillFormValues");function w(v){if(!(v instanceof HTMLElement))return!1;const E=v.nodeName.toLowerCase(),c=(v.getAttribute("type")||"").toLowerCase();return E==="select"||E==="textarea"||E==="input"&&c!=="submit"&&c!=="reset"||v.isContentEditable}a(w,"isFormField");function y(v){return new URLSearchParams(v)}a(y,"searchParamsFromFormData");function T(v,E){const c=new URLSearchParams(v.search),s=y(E);for(const[f,S]of s)c.append(f,S);return c.toString()}a(T,"combineGetFormSearchParams");function I(v){return y(new FormData(v)).toString()}a(I,"serialize")},2699:(x,C,h)=>{h.d(C,{P:()=>g,t:()=>p});function g(d){const l=[...d.querySelectorAll("meta[name=html-safe-nonce]")].map(o=>o.content);if(l.length<1)throw new Error("could not find html-safe-nonce on document");return l}a(g,"getDocumentHtmlSafeNonces");class m extends Error{constructor(l,o){super(`${l} for HTTP ${o.status}`);this.response=o}}a(m,"ResponseError");function p(d,l,o=!1){const u=l.headers.get("content-type")||"";if(!o&&!u.startsWith("text/html"))throw new m(`expected response with text/html, but was ${u}`,l);if(o&&!(u.startsWith("text/html")||u.startsWith("application/json")))throw new m(`expected response with text/html or application/json, but was ${u}`,l);const _=l.headers.get("x-html-safe");if(_){if(!d.includes(_))throw new m("response X-HTML-Safe nonce did not match",l)}else throw new m("missing X-HTML-Safe nonce",l)}a(p,"verifyResponseHtmlSafeNonce")},9115:(x,C,h)=>{var g=h(90420),m=Object.defineProperty,p=Object.getOwnPropertyDescriptor,d=a((o,u,_,w)=>{for(var y=w>1?void 0:w?p(u,_):u,T=o.length-1,I;T>=0;T--)(I=o[T])&&(y=(w?I(u,_,y):I(y))||y);return w&&y&&m(u,_,y),y},"__decorateClass");let l=a(class extends HTMLElement{connectedCallback(){this.control&&(this.storedInput=Array(this.control.children.length).fill("")),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const o=this.closest("details");o&&o.addEventListener("toggle",()=>{o.open&&this.source.focus()})}relayKeydown(o){if((this.isControlTab(o.target)||o.target===this.source)&&(o.key==="ArrowDown"||o.key==="Tab"))o.preventDefault(),o.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"));else if(o.key==="Escape"){const u=this.closest("details");u&&u.removeAttribute("open")}}isControlTab(o){return!o||!this.control?!1:Array.from(this.control.children).includes(o)}relayInput(o){if(!o.target)return;const _=o.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:_}))}routeCustomEvent(o){this.sinks[this.selectedIndex].dispatchEvent(o)}get selectedIndex(){if(!this.control)return 0;const o=this.control.querySelector('[aria-selected="true"]');return o?Array.from(this.control.children).indexOf(o):0}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(o){this.source.value=this.storedInput[this.selectedIndex];const u=o.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=u,this.source.setAttribute("aria-label",u),this.notifySelected()}notifySelected(){const o=this.sinks[this.selectedIndex],u=new CustomEvent("tab-selected");o.dispatchEvent(u)}},"InputDemuxElement");d([g.fA],l.prototype,"source",2),d([g.GO],l.prototype,"sinks",2),d([g.fA],l.prototype,"control",2),l=d([g.Ih],l)},10900:(x,C,h)=>{h.d(C,{r:()=>g});function g(m,p){const d=m.createElement("template");return d.innerHTML=p,m.importNode(d.content,!0)}a(g,"parseHTML")},83956:(x,C,h)=>{h.d(C,{M:()=>m,W:()=>p});var g=h(59753);async function m(d,l=!0){const o=d.querySelectorAll('[name="codespace[location]"], [name="location"]');if(o.length===0)return;for(const y of o)if(y.value)return;const u=d.querySelector("button[type=submit]");u instanceof HTMLInputElement&&(u.disabled=!0);const _=d.getAttribute("data-codespace-locations-url");if(!_)return;const w=await p(_);if(l&&w)for(const y of o)y.value=w.current;return w}a(m,"prefetchCodespaceLocation");async function p(d){const l=await fetch(d,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!l.ok){const o=new Error,u=l.statusText?` ${l.statusText}`:"";throw o.message=`HTTP ${l.status}${u}`,o}return l.json()}a(p,"fetchLocationValues"),(0,g.on)("submit",".js-prefetch-codespace-location",async function(d){const l=d.currentTarget;d.preventDefault(),await m(l),l.submit()})},43452:(x,C,h)=>{h.d(C,{Z:()=>g});function g(m){var p,d;const l=(d=(p=m.head)==null?void 0:p.querySelector('meta[name="expected-hostname"]'))==null?void 0:d.content;if(!l)return!1;const o=l.replace(/\.$/,"").split(".").slice(-2).join("."),u=m.location.hostname.replace(/\.$/,"").split(".").slice(-2).join(".");return o!==u}a(g,"detectProxySite")},68906:(x,C,h)=>{var g=h(60785),m=h(83476);const{getItem:p,setItem:d,removeItem:l}=(0,g.Z)("localStorage",{throwQuotaErrorsOnSet:!0});var o=(s=>(s.Branch="branch",s.Tag="tag",s))(o||{});const u=a(class{constructor(s,f,S,k,L){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.isLoading=!0,this.fetchInProgress=!1,this.fetchFailed=!1,this.refType=s,this.selector=f,this.refEndpoint=S,this.cacheKey=k,this.nameWithOwner=L}render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;const s=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(s)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(s){if(this.emitStats(s),!s.ok){this.fetchFailed=!0;return}const f=s.clone(),S=await s.json();this.knownItems=S.refs,this.cacheKey=S.cacheKey,this.flushToLocalStorage(await f.text())}emitStats(s){if(!s.ok){(0,m.b)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);return}switch(s.status){case 200:{(0,m.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break}case 304:{(0,m.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break}default:(0,m.b)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(s){if(s===""){this.currentSearchResult=this.knownItems;return}const f=[],S=[];this.exactMatchFound=!1;let k;for(const L of this.knownItems)if(k=L.indexOf(s),!(k<0)){if(k===0){s===L?(S.unshift(L),this.exactMatchFound=!0):S.push(L);continue}f.push(L)}this.currentSearchResult=[...S,...f]}bootstrapFromLocalStorage(){const s=p(this.localStorageKey);if(!s)return!1;const f=JSON.parse(s);return f.cacheKey!==this.cacheKey||!("refs"in f)?(l(this.localStorageKey),!1):(this.knownItems=f.refs,this.isLoading=!1,(0,m.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0)}async flushToLocalStorage(s){try{d(this.localStorageKey,s)}catch(f){if(f.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,m.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{d(this.localStorageKey,s)}catch(S){S.message.toLowerCase().includes("quota")&&(0,m.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw f}}clearSiblingLocalStorage(){for(const s of Object.keys(localStorage))s.startsWith(u.LocalStoragePrefix)&&l(s)}get localStorageKey(){return`${u.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}},"_SearchIndex");let _=u;_.LocalStoragePrefix="ref-selector";var w=h(69567),y=h(90420),T=h(17945),I=Object.defineProperty,v=Object.getOwnPropertyDescriptor,E=a((s,f,S,k)=>{for(var L=k>1?void 0:k?v(f,S):f,F=s.length-1,O;F>=0;F--)(O=s[F])&&(L=(k?O(f,S,L):O(L))||L);return k&&L&&I(f,S,L),L},"__decorateClass");let c=a(class extends HTMLElement{constructor(){super(...arguments);this.isCurrentVisible=!1,this.currentSelectionIndex=null,this.handleWindowResize=()=>{if(!this.virtualizedList)return;const s=this.isMobileViewport,f=this.windowHeight;this.updateViewportSize();const S=s!==this.isMobileViewport,k=f!==this.windowHeight;if(S){this.virtualizedList.destroy(),this.setupVirtualizedList();return}!this.isMobileViewport||!k||(this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList.resize(this.listHeight))},this.windowResized=()=>{this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),this.resizeAnimationRequest=requestAnimationFrame(this.handleWindowResize)}}connectedCallback(){window.addEventListener("resize",this.windowResized),this.refType=this.getRequiredAttr("type")==="branch"?o.Branch:o.Tag;const s=this.getAttribute("current-committish");this.currentCommittish=s?atob(s):null,this.input=this.hasAttribute("initial-filter")&&this.currentCommittish||"",this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.canCreate=this.hasAttribute("can-create"),this.prefetchOnMouseover=this.hasAttribute("prefetch-on-mouseover");const f=this.getRequiredAttr("query-endpoint"),S=this.getRequiredAttr("cache-key");this.index=new _(this.refType,this,f,S,this.nameWithOwner),this.updateViewportSize(),this.setupFetchListeners()}disconnectedCallback(){this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),window.removeEventListener("resize",this.windowResized)}updateViewportSize(){this.isMobileViewport=window.innerWidth<544,this.windowHeight=window.innerHeight}inputEntered(s){this.input=s.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(s,f){return new w.R(s,f,w.XK)}renderRow(s){const f=this.index.currentSearchResult[s];if(!f&&s>=this.listLength)return document.createElement("span");if(this.index.fetchFailed)return this.renderTemplate(this.fetchFailedTemplate,{index:s,refName:this.input});if(!f){const O=this.input===this.currentCommittish;return this.isCurrentVisible||(this.isCurrentVisible=O),this.renderTemplate(this.noMatchTemplate,{index:s,isCurrent:O,refName:this.input})}const S=this.input.length>0,k=S?"is-filtering":"",L=f===this.currentCommittish;this.isCurrentVisible||(this.isCurrentVisible=L);const F=this.renderTemplate(this.itemTemplate,{refName:f,index:s,isFilteringClass:k,urlEncodedRefName:this.urlEncodeRef(f),isCurrent:L,isNotDefault:f!==this.defaultBranch});if(S){const O=F.querySelector("span");O.textContent="";const H=f.split(this.input),V=H.length-1;for(let q=0;q<H.length;q++){const z=H[q];if(O.appendChild(document.createTextNode(z)),q<V){const U=document.createElement("b");U.textContent=this.input,O.appendChild(U)}}}return F}urlEncodeRef(s){return encodeURIComponent(s).replaceAll("%2F","/").replaceAll("%3A",":").replaceAll("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList){this.index.search(this.input),this.setupVirtualizedList();return}this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listHeight(){return this.isMobileViewport?this.windowHeight*.3:330}get listLength(){const s=this.index.currentSearchResult.length;return this.showCreateRow?s+1:s||1}get showCreateRow(){return!this.index.fetchFailed&&!this.index.exactMatchFound&&this.input!==""&&this.canCreate}getRequiredAttr(s,f=this){const S=f.getAttribute(s);if(!S)throw new Error(`Missing attribute for ${f}: ${s}`);return S}setupFetchListeners(){const s=this.closest("details");let f=!1;const S=a(()=>{f||(this.index.fetchData(),f=!0)},"fetch");if(!s||s.open){S();return}this.prefetchOnMouseover&&s.addEventListener("mouseover",S,{once:!0}),this.addEventListener("keydown",this.keydown),this.addEventListener("change",this.updateCurrent);const k=s.querySelector("input[data-ref-filter]");k&&(k.addEventListener("input",()=>{this.input=k.value,this.render()}),k.addEventListener("keydown",L=>{if(L.key==="ArrowDown"||L.key==="Tab")L.preventDefault(),L.stopPropagation(),this.focusFirstListMember();else if(L.key==="Enter"){let F=this.index.currentSearchResult.indexOf(this.input);if(F===-1)if(this.showCreateRow)F=this.listLength-1;else return;s.querySelector(`[data-index="${F}"]`).click(),L.preventDefault()}}))}focusFirstListMember(){!this.virtualizedList||(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}updateCurrent(s){s.target instanceof HTMLInputElement&&s.target.checked&&s.target.value&&(this.currentCommittish=s.target.value)}keydown(s){if(this.currentSelectionIndex!==null){if(s.key==="Enter"){const f=document.activeElement;if(!f)return;f.click(),s.preventDefault();return}if(!(s.key==="Tab"&&s.shiftKey)&&s.key!=="Escape")switch(s.preventDefault(),s.stopPropagation(),s.key){case"ArrowUp":{this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break}case"Home":{this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break}case"End":{this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break}case"Tab":case"ArrowDown":{this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex);break}}}}focusItemAtIndex(s){this.virtualizedList.scrollToIndex(s,"center"),setTimeout(()=>{const f=this.listContainer.querySelector(`[data-index="${s}"]`);f&&f.focus()},20)}setupVirtualizedList(){this.listContainer.innerHTML="",this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList=new T.Z(this.listContainer,{height:this.listHeight,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:s=>{const f=this.isMobileViewport?54:33;return this.showCreateRow&&s===this.listLength-1?51:f},onRowsRendered:()=>{var s;this.hiddenCurrentElement&&(this.listContainer.removeChild(this.hiddenCurrentElement),delete this.hiddenCurrentElement),this.isCurrentVisible?this.isCurrentVisible=!1:this.hiddenCurrentItemTemplate&&(this.hiddenCurrentElement=document.createElement("div"),(s=this.hiddenCurrentElement)==null||s.appendChild(this.renderTemplate(this.hiddenCurrentItemTemplate,{refName:this.currentCommittish})),this.listContainer.appendChild(this.hiddenCurrentElement))},initialIndex:0,overscanCount:6}),this.virtualizedList.resize.bind(this.virtualizedList)}},"RefSelectorElement");E([y.fA],c.prototype,"listContainer",2),E([y.fA],c.prototype,"itemTemplate",2),E([y.fA],c.prototype,"noMatchTemplate",2),E([y.fA],c.prototype,"fetchFailedTemplate",2),E([y.fA],c.prototype,"hiddenCurrentItemTemplate",2),c=E([y.Ih],c)},90137:(x,C,h)=>{h.d(C,{j:()=>g,u:()=>m});function g(p){const d=p.closest("form");if(!(d instanceof HTMLFormElement))return;let l=m(d);if(p.name){const o=p.matches("input[type=submit]")?"Submit":"",u=p.value||o;l||(l=document.createElement("input"),l.type="hidden",l.classList.add("is-submit-button-value"),d.prepend(l)),l.name=p.name,l.value=u}else l&&l.remove()}a(g,"persistSubmitButtonValue");function m(p){const d=p.querySelector("input.is-submit-button-value");return d instanceof HTMLInputElement?d:null}a(m,"findPersistedSubmitButtonValue")},60785:(x,C,h)=>{h.d(C,{Z:()=>m});class g{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}}a(g,"NoOpStorage");function m(p,d={throwQuotaErrorsOnSet:!1},l=window){let o;try{o=l[p]}catch{o=new g}const{throwQuotaErrorsOnSet:u}=d;function _(T){try{return o.getItem(T)}catch{return null}}a(_,"getItem");function w(T,I){try{o.setItem(T,I)}catch(v){if(u&&v.message.toLowerCase().includes("quota"))throw v}}a(w,"setItem");function y(T){try{o.removeItem(T)}catch{}}return a(y,"removeItem"),{getItem:_,setItem:w,removeItem:y}}a(m,"safeStorage")},83476:(x,C,h)=>{h.d(C,{b:()=>d});var g=h(43452),m=h(34782);let p=[];function d(w,y=!1){w.timestamp===void 0&&(w.timestamp=new Date().getTime()),w.loggedIn=_(),w.bundler="webpack",p.push(w),y?u():o()}a(d,"sendStats");let l=null;async function o(){await m.C,l==null&&(l=window.requestIdleCallback(u))}a(o,"scheduleSendStats");function u(){var w,y;if(l=null,!p.length||(0,g.Z)(document))return;const T=(y=(w=document.head)==null?void 0:w.querySelector('meta[name="browser-stats-url"]'))==null?void 0:y.content;if(!T)return;const I=JSON.stringify({stats:p});try{navigator.sendBeacon&&navigator.sendBeacon(T,I)}catch{}p=[]}a(u,"flushStats");function _(){var w,y;return!!((y=(w=document.head)==null?void 0:w.querySelector('meta[name="user-login"]'))==null?void 0:y.content)}a(_,"isLoggedIn"),document.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u)}},x=>{var C=a(g=>x(x.s=g),"__webpack_exec__");x.O(0,[5724,90,3878],()=>C(79535));var h=x.O()}]);})();

//# sourceMappingURL=codespaces-f725c6e6abec.js.map